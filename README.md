# Azure Architecture Recommender

A complete solution for matching applications to Azure architecture patterns based on assessment data.

## Prerequisites: Application Context File

This tool requires an **application context file** generated by [Dr. Migrate](https://drmigrate.com) as part of its migration planning workflow.

### What is an Application Context File?

During migration planning, Dr. Migrate uses [AppCat](https://learn.microsoft.com/en-us/azure/migrate/appcat/dotnet) (Microsoft's application assessment tool) to evaluate Java and .NET applications for Azure readiness. This assessment process generates a JSON context file containing:

- **Application Overview** - Application name, type, business criticality, and recommended migration treatment
- **Detected Technologies** - Runtime environments, frameworks, databases, and middleware
- **Server Details** - Infrastructure metrics, OS information, and Azure VM readiness
- **App Modernization Results** - Platform compatibility and recommended Azure targets

The context file is automatically generated when you [initiate an assessment in Dr. Migrate](https://learn.drmigrate.com/docs/using-dr-migrate/migration-planning/appcat-github-integration/).

### Integration with Dr. Migrate

This tool **integrates with** Dr. Migrate's workflow - it is not a feature of Dr. Migrate itself. The workflow is:

1. **In Dr. Migrate**: Assess your application using AppCat to generate a context file
2. **In this tool**: Upload the context file to get architecture recommendations
3. **Back to Dr. Migrate**: Use the recommendations to inform your migration strategy

## Components

| Component | Purpose | For Who |
|-----------|---------|---------|
| **Catalog Builder GUI** | Generate architecture catalogs from Azure Architecture Center | All users (first-time setup) |
| **Recommendations App** | Upload context files and get architecture recommendations | End users / customers |
| **Architecture Scorer CLI** | Backend engine + command-line interface | Automation / power users |

**Note:** The Recommendations App uses the Architecture Scorer as its backend engine. Most users will never need to use the CLI directly.

## Quick Start (Typical User Flow)

### Step 1: Install

```bash
# Clone this repository
git clone https://github.com/adamswbrown/azure-architecture-categoriser-.git
cd azure-architecture-categoriser-

# Install with GUI support
pip install -e ".[recommendations-app,gui]"
```

### Step 2: Generate a Catalog

```bash
# Launch Catalog Builder GUI (port 8502)
./bin/start-catalog-builder-gui.sh

# Or on Windows:
.\bin\start-catalog-builder-gui.ps1
```

In the Catalog Builder:
1. Click **Clone Repository** in the sidebar to get Azure Architecture Center
2. Click **Generate with Defaults** to create `architecture-catalog.json`

### Step 3: Get Recommendations

```bash
# Launch Recommendations App (port 8501)
./bin/start-recommendations-app.sh

# Or on Windows:
.\bin\start-recommendations-app.ps1
```

In the Recommendations App:
1. Upload your Dr. Migrate context file
2. Answer optional clarification questions
3. Download your PDF report

---

## Alternative: CLI for Automation

For scripting, CI/CD pipelines, or batch processing, use the CLI directly:

```bash
# Install base package (no GUI)
pip install -e .

# Build catalog
catalog-builder build-catalog \
  --repo-path ./architecture-center \
  --out architecture-catalog.json

# Score an application
architecture-scorer score \
  --catalog architecture-catalog.json \
  --context my-app-context.json
```

## Installation

```bash
# Clone this repository
git clone https://github.com/adamswbrown/azure-architecture-categoriser-.git
cd azure-architecture-categoriser-

# Base installation (CLI tools)
pip install -e .

# With web app
pip install -e ".[recommendations-app]"

# With GUI catalog builder
pip install -e ".[gui]"

# Development
pip install -e ".[dev]"
```

## Architecture

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        Azure Architecture Recommender                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────┐         ┌──────────────────────────────────────┐  │
│  │  Catalog Builder │         │       Recommendations App            │  │
│  │       GUI        │         │         (Customer UI)                │  │
│  │                  │         │                                      │  │
│  │  One-time setup  │         │  ┌──────────────────────────────┐   │  │
│  │  to generate     │────────▶│  │  Architecture Scorer         │   │  │
│  │  catalog         │         │  │  (Backend Engine)            │   │  │
│  └──────────────────┘         │  │                              │   │  │
│           │                    │  │  Matching + Scoring + Q&A   │   │  │
│           ▼                    │  └──────────────────────────────┘   │  │
│  ┌──────────────────┐         └──────────────────────────────────────┘  │
│  │ architecture-    │                          │                        │
│  │ catalog.json     │                          ▼                        │
│  │ (~170 patterns:  │         ┌──────────────────────────────────────┐  │
│  │  curated+examples)│         │  PDF Report / JSON Export            │  │
│  └──────────────────┘         └──────────────────────────────────────┘  │
│                                                                          │
│  ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─   │
│  For automation/scripting: architecture-scorer CLI (same engine)        │
└─────────────────────────────────────────────────────────────────────────┘
```

## Typical Workflow

1. **One-Time Setup: Build Catalog**
   - Launch Catalog Builder GUI
   - Clone Azure Architecture Center repository
   - Generate `architecture-catalog.json` (~170 architectures: curated + examples)

2. **Assess Application** (in Dr. Migrate)
   - Use Dr. Migrate to assess your application with AppCat
   - Export the context JSON file

3. **Get Recommendations**
   - Launch Recommendations App
   - Upload your context file
   - Answer optional clarification questions
   - View ranked recommendations with explanations

4. **Export & Share**
   - Download PDF report for stakeholders
   - Download JSON for integration with other tools

5. **Periodic: Refresh Catalog**
   - Click "Refresh Catalog" in Recommendations App when catalog is stale
   - Or re-run Catalog Builder for custom filtering

## Key Features

- **~170 Azure Architectures** from official Azure Architecture Center (curated patterns + examples)
- **Quality Indicators** - Each architecture marked as curated, AI-enriched, or example (learning/POC)
- **Explainable Recommendations** - See why each architecture fits or struggles
- **Confidence Levels** - Know how certain the recommendations are
- **Interactive Questions** - Improve accuracy by answering clarifying questions
- **PDF Reports** - Professional reports for stakeholders
- **Configurable Scoring** - Tune weights and thresholds via config file or UI
- **Multiple Interfaces** - Web app for users, CLI for automation

## Sample Data

The repository includes 25 sample context files demonstrating different migration scenarios:

| Scenario | Description |
|----------|-------------|
| Java Refactor to AKS | Spring Boot microservices to Kubernetes |
| .NET Replatform | Web app to Azure App Service |
| Legacy Tolerate | VB6 application requiring VM hosting |
| Healthcare HIPAA | Regulated application with compliance requirements |
| AI/ML Platform | Machine learning workload with GPU needs |
| Mainframe COBOL | Legacy mainframe with modernization blockers |
| Startup Cost-Optimized | Serverless/consumption-based architecture |
| Multi-Region Active-Active | Mission-critical global deployment |

Generate or regenerate sample files:

```bash
# macOS/Linux
./bin/generate-sample-data.sh

# Windows PowerShell
.\bin\generate-sample-data.ps1

# List all available scenarios
./bin/generate-sample-data.sh --list
```

See [tests/fixtures/context_files/README.md](tests/fixtures/context_files/README.md) for the full list.

## Documentation

| Document | Description |
|----------|-------------|
| [Catalog Builder](docs/catalog-builder.md) | Building architecture catalogs |
| [Architecture Scorer](docs/architecture-scorer.md) | Scoring engine details |
| [Recommendations App](docs/recommendations-app.md) | Customer-facing web app |
| [Configuration](docs/configuration.md) | Full configuration reference |
| [Catalog Builder Spec](docs/design/catalog-builder-prompt-v1.md) | Design specification |
| [Scorer Spec](docs/design/architecture-scorer-prompt-v1.md) | Scoring specification |

## Repository Structure

```
azure-architecture-recommender/
├── bin/                           # Launcher scripts
│   ├── start-recommendations-app.sh/.ps1    # Launch recommendations app
│   ├── start-catalog-builder-gui.sh/.ps1    # Launch catalog builder GUI
│   └── generate-sample-data.sh/.ps1         # Generate test context files
├── src/                           # Source code
│   ├── catalog_builder/           # Catalog generation CLI
│   ├── catalog_builder_gui/       # Catalog Builder GUI
│   ├── architecture_scorer/       # Scoring engine
│   └── architecture_recommendations_app/  # Customer web app
├── docs/                          # Documentation
│   ├── design/                    # Design specifications
│   ├── images/                    # Screenshots
│   └── *.md                       # Component docs
├── tests/                         # Tests
│   ├── fixtures/context_files/    # Sample context files (25 scenarios)
│   └── generate_sample_data.py    # Sample data generator
├── examples/                      # Example files
└── architecture-catalog.json      # Generated catalog
```

## Version

**v1.2** - Recommendations App release:
- Customer-facing Streamlit web application
- 3-step wizard flow (Upload → Questions → Results)
- PDF report generation
- Light theme with Azure branding

**v1.1** - Architecture Scorer release:
- Interactive CLI with clarification questions
- Confidence level calculations
- Programmatic API

**v1.0** - Initial release:
- 171 architectures from Azure Architecture Center
- Clean Azure services extraction
- Quality differentiation (curated vs example_only)

## License

MIT
